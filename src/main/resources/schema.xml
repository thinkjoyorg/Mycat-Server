<?xml version="1.0"?>
<!DOCTYPE mycat:schema SYSTEM "schema.dtd">
<mycat:schema xmlns:mycat="http://org.opencloudb/">

    <schema name="ucenter" checkSQLschema="false" sqlMaxLimit="100000">
        <!-- auto sharding by id (long) -->
        <!--<table name="travelrecord" dataNode="dn$1-3" rule="auto-sharding-long"/>-->

        <!-- global table is auto cloned to all defined data nodes ,so can join
            with any table whose sharding node is in the same data node -->
        <table name="bd_agency" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_app_school" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_apprange" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_classes" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dept" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_area" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_class_status" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_education" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_family_relationship" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_first_subject" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_gender" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_grade" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_graduate" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_school_bxlx" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_school_bxlx_grade" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_school_xxbb" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_school_xxlb" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_seed_system" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_setrange" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_study_period" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_subject" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_teacher_category" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_dict_world_area" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_information_history" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_school" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_school_grade" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_school_subject" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_school_term" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="bd_user_role_tag" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="oauth_access_token" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="oauth_client_details" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="oauth_client_token" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="oauth_code" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="oauth_refresh_token" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_app_domain" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_login_config" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_oauth_client_resource" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_oauth_resource" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_tag_categories" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_tag_categories_relationship" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_tag_data" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_tag_group" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_tag_item" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_biz_sys" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_data_model" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_datagroup" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_datagroup_data" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_http_ds" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_model" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_resource" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_resource_action" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_resource_grid" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_role" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_role_resource" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_role_user" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_user" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_user_data" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_user_datagroup" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_user_dimension" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucm_user_log" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="uic_user_role_tag" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="uic_lock_data" primaryKey="ID" type="global" dataNode="dn$0-3"/>
        <table name="ucenter_update_logging_last" primaryKey="ID" type="global" dataNode="dn$0-3"/>


        <!--以上为全局表-->

        <!--全局sequence只在0节点上-->
        <table name="mycat_sequence" primaryKey="ID" dataNode="dn0"/>

        <!--日志表切分-->
        <table name="ucenter_update_logging" primaryKey="ID" dataNode="dn$0-3" rule="sharding-by-murmur"/>


        <!--用户相关表切分-->
        <table name="uic_account_info" primaryKey="ID" dataNode="dn$0-3"
               rule="sharding-by-murmur"/>

        <table name="uic_user_info" primaryKey="uid"
               autoIncrement="true" dataNode="dn$0-3" rule="sharding-by-murmur-uid">
        </table>
        <table name="uic_app_user_account" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_class_student" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>

        <table name="uic_class_teacher" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid">
            <childTable name="uic_class_teach" joinKey="refId"
                        parentKey="id"/>
        </table>

        <table name="uic_dept_school_member" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_school_member" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_user_bizinfo" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_user_bizsuminfo" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_user_child" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_user_globalinfo" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>
        <table name="uic_user_globalsuminfo" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>

        <table name="uic_user_identity_type" primaryKey="id" autoIncrement="true" dataNode="dn$0-3"
               rule="sharding-by-murmur-uid"/>


        <!--<table name="uic_account_info" primaryKey="id" dataNode="dn$0-3"-->
        <!--rule="sharding-by-murmur">-->
        <!--<childTable name="uic_user_info" primaryKey="id" joinKey="uid"-->
        <!--parentKey="id" autoIncrement="true"/>-->
        <!--<childTable name="uic_app_user_account" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_class_student" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_class_teacher" primaryKey="id" joinKey="uid" parentKey="id">-->
        <!--<childTable name="uic_class_teach" joinKey="refId"-->
        <!--parentKey="id"/>-->
        <!--</childTable>-->

        <!--<childTable name="uic_dept_school_member" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_school_member" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_user_bizinfo" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_user_bizsuminfo" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_user_child" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_user_globalinfo" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_user_globalsuminfo" primaryKey="id" joinKey="uid" parentKey="id"/>-->
        <!--<childTable name="uic_user_identity_type" primaryKey="id" joinKey="uid" parentKey="id"-->
        <!--autoIncrement="false"/>-->
        <!--</table>-->


    </schema>
    <!-- <dataNode name="dn1$0-743" dataHost="localhost1" database="db$0-743"
        /> -->
    <!--<dataNode name="dn0" dataHost="host0" database="ucenter0"/>-->
    <!--<dataNode name="dn1" dataHost="host0" database="ucenter1"/>-->
    <!--<dataNode name="dn2" dataHost="host0" database="ucenter2"/>-->
    <!--<dataNode name="dn3" dataHost="host0" database="ucenter3"/>-->
    <dataNode name="dn$0-3" dataHost="host0" database="ucenter$0-3"/>

    <dataHost name="host0" maxCon="1000" minCon="10" balance="0"
              writeType="0" dbType="mysql" dbDriver="native" switchType="1"
              slaveThreshold="100">
        <heartbeat>select user()</heartbeat>
        <!-- can have multi write hosts -->
        <writeHost host="hostM1" url="172.16.120.107:3306" user="root"
                   password="weixiao123">
            <readHost host="hostS1" url="172.16.120.107:3306" user="root" password="weixiao123"
                      weight="1"/>

        </writeHost>

    </dataHost>

</mycat:schema>